// flex driver based grid-container
%_grid-container--flex {
    display: flex;
    flex-wrap: wrap;
    box-sizing: border-box;
}

@mixin grid-container-align($align-x: none, $align-y: none, $grid: $default-grid) {
    $driver: get-grid-value(driver, $grid);
    $reversed: get-grid-value(reversed, $grid);
    @if ($driver == flex) {
        // X-axis alignment
        @if ($align-x != none) {
            $align-x: _convert-to-media-map($align-x, $grid);
            $grid: set-grid-value(align-x, $align-x $grid);
            @include _for-media-map($align-x, $grid) {
                $bp-align-x: $_for-media-map-value;
                $allowed-align-x-values: (flex-start, flex-end, center, space-between, space-around);
                @if ($bp-align-x == left and $reversed == false) or
                    ($bp-align-x == right and $reversed == true) {
                    justify-content: flex-start;
                } @else if ($bp-align-x == left and $reversed == true) or
                           ($bp-align-x == right and $reversed == false) {
                    justify-content: flex-end;
                } @else if (index($allowed-align-x-values, $bp-align-x) != null) {
                    justify-content: $bp-align-x;
                } @else {
                    @error "Unknown $align-x value: '#{$bp-align-x}'";
                }
            }
        }

        // Y-axis alignment
        @if ($align-y != none) {
            $align-y: _convert-to-media-map($align-y, $grid);
            $grid: set-grid-value(align-y, $align-y $grid);
            @include _for-media-map($align-y, $grid) {
                $bp-align-y: $_for-media-map-value;
                $allowed-align-y-values: (flex-start, flex-end, center, baseline, stretch, auto);
                @if ($bp-align-y == top) {
                    align-items: flex-start;
                } @else if ($bp-align-y == bottom) {
                    align-items: flex-end;
                } @else if (index($allowed-align-y-values, $bp-align-y) != null) {
                    align-items: $bp-align-y;
                } @else {
                    @error "Unknown $align-y value: '#{$bp-align-y}'";
                }
            }
        }
    } @else {
        @warn "Driver '#{$driver}' is not support alignment";
    }
}

@mixin grid-container--flex($grid: $default-grid) {
    @extend %_grid-container--flex;

    flex-wrap: get-grid-value(wrap, $grid);

    $collapse: get-grid-value(collapse, $grid);
    $align-x: get-grid-value(align-x, $grid);
    $align-y: get-grid-value(align-y, $grid);
    $reversed: get-grid-value(reversed, $grid);

    @include grid-container-align($align-x, $align-y, $grid: $grid);
    // collapse
    @if ($collapse) {
        @include grid-collapse($grid);
    }

    // Reverse
    @if $reversed == true {
        flex-direction: row-reverse;
    } @else {
        flex-direction: row;
    }
}

// float driver based grid-container
%_grid-container--float {
    box-sizing: border-box;
    &::before,
    &::after {
        display: table;
        content: "";
    }
    &::after {
        clear: both;
    }
}

@mixin grid-container--float($grid: $default-grid) {
    @extend %_grid-container--float;

    // collapse
    $collapse: get-grid-value(collapse, $grid);
    @if ($collapse) {
        @include grid-collapse($grid);
    }
}

//common grid-container mixin
@mixin grid-container($grid: $default-grid) {
    $driver: get-grid-value(driver, $grid);
    @if ($driver == flex) {
        @include grid-container--flex($grid);
    } @else if ($driver == float) {
        @include grid-container--float($grid);
    } @else {
        @error "Incorrect driver value: '#{$driver}'";
    }
}
