// generate media queries for column
@mixin _col-media($cols, $grid) {
    $cols-type: type-of($cols);
    @if ($cols-type == number) {
        width: _col-width($cols, $grid);
    } @else {
        @if ($cols-type == list) {
            $cols: _columns-list-to-map($cols, $grid);
        }

        $grid: _sort-breakpoints-in-grid($grid, min);
        $breakpoints: get-grid-value(breakpoints, $grid);
        $cols-length: length($cols);
        $last-bp-minw: null;
        $i: 1;

        @each $bp-key, $bp-widths in $breakpoints {
            $bp-cols: map-get($cols, $bp-key);
            @if ($bp-cols != null) {
                $bp-minw: nth($bp-widths, 1);
                @if ($i == 1) {
                    width: _col-width($bp-cols, $grid);
                } @else if ($i == $cols-length) {
                    @media screen and (min-width: $last-bp-minw) {
                        width: _col-width($bp-cols, $grid);
                    }
                } @else {
                    @media screen and (min-width: $last-bp-minw) and (max-width: $bp-minw - 1) {
                        width: _col-width($bp-cols, $grid);

                    }
                }
                $last-bp-minw: $bp-minw;
                $i: $i + 1;
            }
        }
    }
}

// common styles of grid-column
%_grid-column-base {
    box-sizing: border-box;
    min-height: 1px;
}

// flex based grid-column
@mixin grid-column--flex($columns, $grid: $default-grid) {
    @extend %_grid-column-base;
    
    @include _col-media($columns, $grid);
    $grid-half-gutter: get-grid-value(gutter, $grid) / 2;
    margin-left: $grid-half-gutter;
    margin-right: $grid-half-gutter;

    $align-y: get-grid-value(align-y, $grid);
    @if $align-y != none {
        @if $align-y == top {
            align-self: flex-start;
        } @else if $align-y == bottom {
            align-self: flex-end;
        } @else if $align-y == middle {
            align-self: center;
        } @else {
            align-self: $align-y;
        }
    }
}

// float based grid-column
@mixin grid-column--float($columns, $grid: $default-grid) {
    @extend %_grid-column-base;
    // TODO: complete grid-column--float
}

@mixin grid-column($columns, $grid: $default-grid) {
    $driver: map-get($grid, driver);
    @if ($driver == flex) {
        @include grid-column--flex($columns, $grid);
    } @else if ($driver == float) {
        @include grid-column--float($columns, $grid);
    } @else {
        @error "Incorrect driver value: '#{$driver}'";
    }
}
